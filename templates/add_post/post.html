<h4 class="mb-3">房屋地址</h4>

<div class="input-group mb-3">
    <label for="address" class="input-group-text">房屋地址：</label>
    <input class="form-control" type="text" id="address"
           name="address" value="{{ post['address'] if 'address' in post else '' }}" required>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="input-group mb-3">
            <label for="city" class="input-group-text">選擇縣市：</label>
            <select class="form-select" id="city" name="city">
                <option value="台北市" {% if 'city' in post and post['city'] == '台北市' %}selected{% endif %}>
                    台北市
                </option>
                <option value="新北市" {% if 'city' in post and post['city'] == '新北市' %}selected{% endif %}>
                    新北市
                </option>
                <option value="桃園市" {% if 'city' in post and post['city'] == '桃園市' %}selected{% endif %}>
                    桃園市
                </option>
                <option value="新竹市" {% if 'city' in post and post['city'] == '新竹市' %}selected{% endif %}>
                    新竹市
                </option>
                <option value="新竹縣" {% if 'city' in post and post['city'] == '新竹縣' %}selected{% endif %}>
                    新竹縣
                </option>
                <option value="宜蘭縣" {% if 'city' in post and post['city'] == '宜蘭縣' %}selected{% endif %}>
                    宜蘭縣
                </option>
                <option value="基隆市" {% if 'city' in post and post['city'] == '基隆市' %}selected{% endif %}>
                    基隆市
                </option>
                <option value="台中市" {% if 'city' in post and post['city'] == '台中市' %}selected{% endif %}>
                    台中市
                </option>
                <option value="彰化縣" {% if 'city' in post and post['city'] == '彰化縣' %}selected{% endif %}>
                    彰化縣
                </option>
                <option value="雲林縣" {% if 'city' in post and post['city'] == '雲林縣' %}selected{% endif %}>
                    雲林縣
                </option>
                <option value="苗栗縣" {% if 'city' in post and post['city'] == '苗栗縣' %}selected{% endif %}>
                    苗栗縣
                </option>
                <option value="南投縣" {% if 'city' in post and post['city'] == '南投縣' %}selected{% endif %}>
                    南投縣
                </option>
                <option value="高雄市" {% if 'city' in post and post['city'] == '高雄市' %}selected{% endif %}>
                    高雄市
                </option>
                <option value="台南市" {% if 'city' in post and post['city'] == '台南市' %}selected{% endif %}>
                    台南市
                </option>
                <option value="嘉義市" {% if 'city' in post and post['city'] == '嘉義市' %}selected{% endif %}>
                    嘉義市
                </option>
                <option value="屏東縣" {% if 'city' in post and post['city'] == '屏東縣' %}selected{% endif %}>
                    屏東縣
                </option>
                <option value="台東縣" {% if 'city' in post and post['city'] == '台東縣' %}selected{% endif %}>
                    台東縣
                </option>
                <option value="花蓮縣" {% if 'city' in post and post['city'] == '花蓮縣' %}selected{% endif %}>
                    花蓮縣
                </option>
                <option value="澎湖縣" {% if 'city' in post and post['city'] == '澎湖縣' %}selected{% endif %}>
                    澎湖縣
                </option>
                <option value="金門縣" {% if 'city' in post and post['city'] == '金門縣' %}selected{% endif %}>
                    金門縣
                </option>
                <option value="連江縣" {% if 'city' in post and post['city'] == '連江縣' %}selected{% endif %}>
                    連江縣
                </option>
            </select>
        </div>
    </div>
    <div class="col-md-6">
        <div class="input-group mb-3">
            <label for="district" class="input-group-text">所在地區：</label>
            <input class="form-control" type="text" id="district" name="district"
                   value="{{ post['district'] if 'district' in post else '' }}" required>
        </div>
    </div>
</div>

{% include './add_post/house.html' %}

<hr class="my-4">

<h4 class="mb-3">房屋資訊</h4>

{% if postType == 'sell' %}
    {% include './add_post/house_sell.html' %}
{% elif postType == 'rent' %}
    {% include './add_post/house_rent.html' %}
{% endif %}

<hr class="my-4">

<h4 class="mb-3">聯絡資訊</h4>

<div class="row">
    <div class="col-md-6">
        <div class="input-group mb-3">
            <label for="name" class="input-group-text">負責人：</label>
            <input class="form-control" type="text" id="name" name="name"
                   value="{{ post['name'] if 'name' in post else '' }}" required>
        </div>
    </div>
    <div class="col-md-6">
        <div class="input-group has-validation mb-3">
            <label for="phone" class="input-group-text">聯絡電話：</label>
            <input class="form-control" type="text" id="phone" name="phone" pattern="09[0-9]{8}"
                   value="{{ post['phone'] if 'phone' in post else '' }}" required>
            <div class="invalid-feedback">
                請輸入有效電話號碼
            </div>
        </div>
    </div>
</div>

<hr class="my-4">

<h4 class="mb-3">貼文</h4>

<div class="input-group mb-3">
    <label class="input-group-text" for="title">貼文標題：</label>
    <input type="text" class="form-control" id="title" name="title"
           value="{{ post['title'] if 'title' in post else '' }}" required>
</div>

<div class="my-3 row">
    <div class="col">
        <div class="input-group">
            <label for="description" class="input-group-text">輸入內容：</label>
            <textarea class="form-control" id="description" name="description" rows="4" cols="50"
                      required>{{ post['description'] if 'description' in post else '' }}</textarea>
        </div>
    </div>
</div>

<script>
    function checkPhoneNumber(input) {
        // 獲取輸入框
        const inputElement = $('#' + input);
        const phonePattern = /^09\d{8}$/; // 手機號碼格式

        // 監聽輸入框的輸入事件
        inputElement.on('input', function () {
            if (phonePattern.test(inputElement.val())) {
                // 格式正確，清除錯誤訊息
                inputElement.removeClass('is-invalid');
            } else {
                // 格式錯誤，顯示錯誤訊息
                inputElement.addClass('is-invalid');
            }
        });
    }

    checkPhoneNumber("phone");
</script>